jQuery( document ).ready( function( $ )
{
	$( '#newsletter_form_3_0' ).on( 'submit', function(e)
	{ 	
      e.preventDefault();
      $('#newsletter_form_3_0 .loading').show();

		if( $( document.activeElement ).attr( 'id' ) == 'subscribe_btn_3_0' )
		{
         var email = $( '#subscriber_email_3_0' ).val();
         var agreed = 0; 
         if ( $('#pramotional_email' ).is( ":checked" ) )
         {
           agreed = 1;
         }
         
         if( email == "" || typeof email == "undefined" || email === null )
         { 
            $('#newsletter_form_3_0 .loading').hide();
            $('#newsletter_form_3_0 .errors').empty();
            $('#newsletter_form_3_0 .errors').append("Email field is empty!");
            $('#newsletter_form_3_0 .errors').show().delay(10000).fadeOut();
         }
         else
         {
            /* 1 - Newsletter List Id */
            $.ajax({
               type: 'post',
               data: 'email='+email + '&list='+'1' + '&boolean='+'true' + '&promotion='+agreed,
               url: '/newsletter/subscribe',
               error: function(error)
               {
                  $('#newsletter_form_3_0 .loading').hide();
                  $('#newsletter_form_3_0 .errors').empty();
                  $('#newsletter_form_3_0 .errors').append( "Subscription failed!" );
                  $('#newsletter_form_3_0 .errors').show().delay(10000).fadeOut();     
               },
               success: function( data )
               {
                  var messages  = '';
                  var error_type = 0;
                  if( data == 1 )
                  {
                     messages = "Confirmation email has been sent to you email id. <br> Please verify to get newsletter!";
                     error_type = 1;
                  }
                  else
                  {
                     var response = JSON.parse(data);
                     messages = response.message;
                     error_type = 0;
                  }
                  
                  if( error_type == 1 )
                  {
                     $('#newsletter_form_3_0 .loading').hide();
                     $('#newsletter_form_3_0 .success').empty();
                     $('#newsletter_form_3_0 .success').append( messages );
                     $('#newsletter_form_3_0 .success').show().delay(10000).fadeOut();                 
                  }
                  else
                  {
                     $('#newsletter_form_3_0 .loading').hide();
                     $('#newsletter_form_3_0 .errors').empty();
                     $('#newsletter_form_3_0 .errors').append( messages );
                     $('#newsletter_form_3_0 .errors').show().delay(10000).fadeOut();
                  }

               }
            });
         }   
		} 
   });  
});